<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="500" fill="white"/>

  <!-- Title -->
  <text x="400" y="30" font-size="20" font-weight="bold" text-anchor="middle">Vermogensdriehoek - Cos φ Correctie</text>

  <!-- VOOR compensatie (links) -->
  <g>
    <text x="200" y="70" font-size="16" font-weight="bold" text-anchor="middle" fill="#F44336">VOOR compensatie (cos φ = 0,75)</text>

    <!-- Triangle -->
    <line x1="50" y1="330" x2="300" y2="330" stroke="black" stroke-width="3"/>
    <text x="175" y="355" font-size="16" font-weight="bold">P = 50 kW</text>

    <line x1="50" y1="330" x2="50" y2="110" stroke="#F44336" stroke-width="3"/>
    <text x="25" y="220" font-size="16" font-weight="bold" fill="#F44336">Q₁</text>

    <line x1="50" y1="110" x2="300" y2="330" stroke="#9C27B0" stroke-width="3"/>
    <text x="165" y="205" font-size="16" font-weight="bold" fill="#9C27B0">S₁</text>

    <!-- Angle arc - correctly drawn from P-axis to S-line -->
    <path d="M 120,330 A 70,70 0 0 0 103,285" stroke="black" stroke-width="2" fill="none"/>
    <text x="135" y="305" font-size="13">φ₁ ≈ 41,4°</text>

    <!-- Values below triangle -->
    <text x="175" y="375" font-size="13" fill="#666" text-anchor="middle">cos φ₁ = 0,75  →  tan φ₁ = 0,882</text>
    <text x="175" y="395" font-size="13" fill="#666" text-anchor="middle">Q₁ = P × tan φ₁ = 50 × 0,882 = 44,1 kVAr</text>
  </g>

  <!-- Arrow -->
  <g>
    <line x1="340" y1="220" x2="410" y2="220" stroke="#4CAF50" stroke-width="4" marker-end="url(#arrow)"/>
    <text x="375" y="200" font-size="14" fill="#4CAF50" font-weight="bold" text-anchor="middle">Compensatie</text>
    <text x="375" y="250" font-size="13" fill="#4CAF50" text-anchor="middle">Q<tspan baseline-shift="sub" font-size="9">c</tspan> = Q₁ - Q₂</text>

    <defs>
      <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
        <polygon points="0 0, 10 3, 0 6" fill="#4CAF50"/>
      </marker>
    </defs>
  </g>

  <!-- NA compensatie (rechts) -->
  <g>
    <text x="600" y="70" font-size="16" font-weight="bold" text-anchor="middle" fill="#4CAF50">NA compensatie (cos φ = 0,92)</text>

    <!-- Triangle (smaller Q) -->
    <line x1="450" y1="330" x2="700" y2="330" stroke="black" stroke-width="3"/>
    <text x="575" y="355" font-size="16" font-weight="bold">P = 50 kW</text>

    <line x1="450" y1="330" x2="450" y2="223" stroke="#4CAF50" stroke-width="3"/>
    <text x="425" y="277" font-size="16" font-weight="bold" fill="#4CAF50">Q₂</text>

    <line x1="450" y1="223" x2="700" y2="330" stroke="#9C27B0" stroke-width="3"/>
    <text x="565" y="265" font-size="16" font-weight="bold" fill="#9C27B0">S₂</text>

    <!-- Angle arc - correctly drawn from P-axis to S-line -->
    <path d="M 520,330 A 70,70 0 0 0 511,292" stroke="black" stroke-width="2" fill="none"/>
    <text x="540" y="315" font-size="13">φ₂ ≈ 23°</text>

    <!-- Values below triangle -->
    <text x="575" y="375" font-size="13" fill="#666" text-anchor="middle">cos φ₂ = 0,92  →  tan φ₂ = 0,426</text>
    <text x="575" y="395" font-size="13" fill="#666" text-anchor="middle">Q₂ = P × tan φ₂ = 50 × 0,426 = 21,3 kVAr</text>
  </g>

  <!-- Result box - BELOW both triangles, no overlap! -->
  <rect x="200" y="425" width="400" height="60" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2" rx="5"/>
  <text x="400" y="450" font-size="16" font-weight="bold" text-anchor="middle" fill="#2E7D32">Benodigde condensatorbank:</text>
  <text x="400" y="475" font-size="18" font-weight="bold" text-anchor="middle" fill="#2E7D32">
    Q<tspan baseline-shift="sub" font-size="12">c</tspan> = 44,1 - 21,3 = 22,8 kVAr
  </text>
</svg>
