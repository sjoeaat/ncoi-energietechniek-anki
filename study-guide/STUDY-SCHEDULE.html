<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìÖ Study Schedule Generator - NCOI Energietechniek</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #1e3c72;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .config-section {
            background: #f5f5f5;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .config-title {
            font-size: 1.5em;
            color: #667eea;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .config-item {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }

        .config-item label {
            display: block;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .config-item input, .config-item select {
            width: 100%;
            padding: 10px;
            font-size: 1em;
            border: 2px solid #ddd;
            border-radius: 5px;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
            display: block;
            margin: 20px auto;
        }

        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .schedule-output {
            display: none;
        }

        .schedule-output.active {
            display: block;
        }

        .calendar-view {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .week-block {
            margin-bottom: 40px;
        }

        .week-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px 10px 0 0;
            font-size: 1.3em;
            font-weight: bold;
        }

        .week-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            background: #f5f5f5;
            padding: 20px;
            border-radius: 0 0 10px 10px;
        }

        .day-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #ddd;
            min-height: 150px;
        }

        .day-card.study-day {
            border-color: #4caf50;
            background: #e8f5e9;
        }

        .day-card.exam-day {
            border-color: #f44336;
            background: #ffebee;
        }

        .day-card.rest-day {
            border-color: #ff9800;
            background: #fff3e0;
        }

        .day-header {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ddd;
        }

        .day-tasks {
            font-size: 0.9em;
            color: #666;
        }

        .task-item {
            padding: 5px 0;
            margin: 5px 0;
        }

        .task-item::before {
            content: "‚úì ";
            color: #4caf50;
            font-weight: bold;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        .tips-box {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .tip-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        @media print {
            body {
                background: white !important;
                padding: 0;
            }
            .config-section, .export-buttons, .btn {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìÖ Study Schedule Generator</h1>
        <div class="subtitle">Genereer een gepersonaliseerd studieplan voor jouw examen</div>

        <div class="config-section">
            <div class="config-title">‚öôÔ∏è Configuratie</div>

            <div class="config-grid">
                <div class="config-item">
                    <label>üìÖ Examendatum:</label>
                    <input type="date" id="examDate" required>
                </div>

                <div class="config-item">
                    <label>üöÄ Starttempo:</label>
                    <select id="intensity">
                        <option value="light">Licht (1-2 opgaven/dag)</option>
                        <option value="moderate" selected>Gemiddeld (2-3 opgaven/dag)</option>
                        <option value="intensive">Intensief (4-5 opgaven/dag)</option>
                    </select>
                </div>

                <div class="config-item">
                    <label>üìö Studiestijl:</label>
                    <select id="style">
                        <option value="sequential">Sequentieel (hoofdstuk voor hoofdstuk)</option>
                        <option value="mixed" selected>Gemixed (afwisseling hoofdstukken)</option>
                        <option value="difficulty">Op moeilijkheid (makkelijk ‚Üí moeilijk)</option>
                    </select>
                </div>

                <div class="config-item">
                    <label>üåÖ Weekenden:</label>
                    <select id="weekends">
                        <option value="study" selected>Studeren</option>
                        <option value="review">Alleen herhaling</option>
                        <option value="rest">Rust</option>
                    </select>
                </div>

                <div class="config-item">
                    <label>üìä Huidige Voortgang:</label>
                    <input type="number" id="completed" min="0" max="84" value="0" placeholder="Aantal voltooide opgaven">
                </div>

                <div class="config-item">
                    <label>‚è∞ Dagelijkse Studietijd:</label>
                    <select id="dailyTime">
                        <option value="30">30 minuten</option>
                        <option value="60" selected>1 uur</option>
                        <option value="90">1.5 uur</option>
                        <option value="120">2 uur</option>
                    </select>
                </div>
            </div>

            <button class="btn" onclick="generateSchedule()">üöÄ Genereer Studieplan</button>
        </div>

        <div class="schedule-output" id="scheduleOutput">
            <div class="summary-stats" id="summaryStats"></div>

            <div class="tips-box">
                <div class="tip-title">üí° Tips voor Succes:</div>
                <div id="personalizedTips"></div>
            </div>

            <div class="calendar-view" id="calendarView"></div>

            <div class="export-buttons">
                <button class="btn" onclick="window.print()">üñ®Ô∏è Print Schema</button>
                <button class="btn" onclick="exportToCalendar()">üì± Export naar Kalender (iCal)</button>
                <button class="btn" onclick="saveSchedule()">üíæ Opslaan</button>
            </div>
        </div>
    </div>

    <script>
        const chapters = {
            'H 1.9': { opgaven: 3, difficulty: 1 },
            'H 2.6': { opgaven: 7, difficulty: 2 },
            'H 3.11': { opgaven: 13, difficulty: 3 },
            'H 4.4': { opgaven: 3, difficulty: 2 },
            'H 5.5': { opgaven: 3, difficulty: 2 },
            'H 6.8': { opgaven: 2, difficulty: 2 },
            'H 7.8': { opgaven: 7, difficulty: 3 },
            'H 9.7': { opgaven: 4, difficulty: 3 },
            'H 10.6': { opgaven: 1, difficulty: 3 },
            'H 11.7': { opgaven: 1, difficulty: 3 }
        };

        function generateSchedule() {
            const examDate = new Date(document.getElementById('examDate').value);
            const today = new Date();

            if (!document.getElementById('examDate').value || examDate <= today) {
                alert('‚ö†Ô∏è Kies een geldige examendatum in de toekomst!');
                return;
            }

            const intensity = document.getElementById('intensity').value;
            const style = document.getElementById('style').value;
            const weekends = document.getElementById('weekends').value;
            const completed = parseInt(document.getElementById('completed').value) || 0;
            const dailyTime = parseInt(document.getElementById('dailyTime').value);

            // Calculate available days
            const totalDays = Math.floor((examDate - today) / (1000 * 60 * 60 * 24));
            const remaining = 84 - completed;

            // Determine opgaven per day based on intensity
            let opgavenPerDay = 2;
            if (intensity === 'light') opgavenPerDay = 1.5;
            else if (intensity === 'intensive') opgavenPerDay = 4.5;

            // Calculate study duration
            const studyDays = Math.ceil(remaining / opgavenPerDay);

            // Generate study plan
            const schedule = generateStudyPlan(today, examDate, remaining, opgavenPerDay, style, weekends);

            // Display results
            displaySchedule(schedule, totalDays, studyDays, remaining, opgavenPerDay);

            // Show output section
            document.getElementById('scheduleOutput').classList.add('active');

            // Scroll to results
            document.getElementById('scheduleOutput').scrollIntoView({ behavior: 'smooth' });
        }

        function generateStudyPlan(startDate, examDate, remaining, opgavenPerDay, style, weekends) {
            const schedule = [];
            let currentDate = new Date(startDate);
            currentDate.setDate(currentDate.getDate() + 1); // Start tomorrow

            let opgavenAssigned = 0;
            const totalOgaven = 84;

            // Create opgave list based on style
            let opgaveList = createOgaveList(style);

            while (currentDate <= examDate && opgavenAssigned < remaining) {
                const dayOfWeek = currentDate.getDay();
                const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);

                let dayPlan = {
                    date: new Date(currentDate),
                    opgaven: [],
                    type: 'rest'
                };

                // Determine what to do this day
                if (isWeekend) {
                    if (weekends === 'study') {
                        // Regular study day
                        const count = Math.min(Math.floor(opgavenPerDay), remaining - opgavenAssigned);
                        for (let i = 0; i < count; i++) {
                            if (opgaveList.length > 0) {
                                dayPlan.opgaven.push(opgaveList.shift());
                                opgavenAssigned++;
                            }
                        }
                        dayPlan.type = 'study';
                    } else if (weekends === 'review') {
                        dayPlan.opgaven.push('Herhaal vorige week');
                        dayPlan.opgaven.push('Anki review sessie');
                        dayPlan.type = 'review';
                    } else {
                        dayPlan.type = 'rest';
                    }
                } else {
                    // Weekday - study
                    const count = Math.min(Math.ceil(opgavenPerDay), remaining - opgavenAssigned);
                    for (let i = 0; i < count; i++) {
                        if (opgaveList.length > 0) {
                            dayPlan.opgaven.push(opgaveList.shift());
                            opgavenAssigned++;
                        }
                    }

                    // Add review on certain days
                    if (dayOfWeek === 3) { // Wednesday
                        dayPlan.opgaven.push('üìù Midweek review');
                    }

                    dayPlan.type = opgavenAssigned >= remaining ? 'exam-prep' : 'study';
                }

                // Last week: exam preparation
                const daysToExam = Math.floor((examDate - currentDate) / (1000 * 60 * 60 * 24));
                if (daysToExam <= 7 && opgavenAssigned >= remaining) {
                    dayPlan.opgaven = ['üéØ Exam voorbereiding', 'Herhaal moeilijke hoofdstukken', 'Practice exams'];
                    dayPlan.type = 'exam-prep';
                }

                if (daysToExam === 1) {
                    dayPlan.opgaven = ['üßò Rust & lichte herhaling', 'Bekijk formuleblad', 'Vroeg naar bed'];
                    dayPlan.type = 'rest';
                }

                if (daysToExam === 0) {
                    dayPlan.opgaven = ['üéì EXAMEN DAG', 'Succes!'];
                    dayPlan.type = 'exam';
                }

                schedule.push(dayPlan);
                currentDate.setDate(currentDate.getDate() + 1);
            }

            return schedule;
        }

        function createOgaveList(style) {
            let list = [];

            if (style === 'sequential') {
                // Chapter by chapter
                Object.keys(chapters).forEach(chapter => {
                    for (let i = 0; i < chapters[chapter].opgaven; i++) {
                        list.push(`${chapter} Opgave ${i + 1}`);
                    }
                });
            } else if (style === 'difficulty') {
                // Easy to hard
                const sorted = Object.keys(chapters).sort((a, b) =>
                    chapters[a].difficulty - chapters[b].difficulty
                );
                sorted.forEach(chapter => {
                    for (let i = 0; i < chapters[chapter].opgaven; i++) {
                        list.push(`${chapter} Opgave ${i + 1}`);
                    }
                });
            } else { // mixed
                // Interleave chapters
                let chapterQueues = {};
                Object.keys(chapters).forEach(ch => {
                    chapterQueues[ch] = chapters[ch].opgaven;
                });

                while (Object.values(chapterQueues).some(count => count > 0)) {
                    Object.keys(chapterQueues).forEach(ch => {
                        if (chapterQueues[ch] > 0) {
                            const opgNum = chapters[ch].opgaven - chapterQueues[ch] + 1;
                            list.push(`${ch} Opgave ${opgNum}`);
                            chapterQueues[ch]--;
                        }
                    });
                }
            }

            return list;
        }

        function displaySchedule(schedule, totalDays, studyDays, remaining, opgavenPerDay) {
            // Summary stats
            const statsHtml = `
                <div class="stat-card">
                    <div class="stat-number">${totalDays}</div>
                    <div class="stat-label">Dagen tot Examen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${studyDays}</div>
                    <div class="stat-label">Studie Dagen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${remaining}</div>
                    <div class="stat-label">Nog Te Doen</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">${opgavenPerDay.toFixed(1)}</div>
                    <div class="stat-label">Per Dag</div>
                </div>
            `;
            document.getElementById('summaryStats').innerHTML = statsHtml;

            // Personalized tips
            let tips = '';
            if (totalDays < 14) {
                tips = '‚ö†Ô∏è <strong>Weinig tijd!</strong> Focus op H 3.11 (Th√©venin/Norton) en H 7.8 (RLC) - deze zijn examen-kritisch!';
            } else if (totalDays > 60) {
                tips = 'üòä <strong>Ruim de tijd!</strong> Neem je tijd voor diepe begrip. Maak extra oefeningen en oefen met alle tools.';
            } else {
                tips = 'üëç <strong>Goede planning!</strong> Volg het schema en je bent goed voorbereid. Vergeet Anki repetities niet!';
            }
            document.getElementById('personalizedTips').innerHTML = tips;

            // Calendar view
            let calendarHtml = '';
            let currentWeek = [];
            let weekNum = 1;

            schedule.forEach((day, index) => {
                currentWeek.push(day);

                // If Sunday or last day, render week
                if (day.date.getDay() === 0 || index === schedule.length - 1) {
                    calendarHtml += renderWeek(currentWeek, weekNum);
                    currentWeek = [];
                    weekNum++;
                }
            });

            document.getElementById('calendarView').innerHTML = calendarHtml;
        }

        function renderWeek(days, weekNum) {
            const weekStart = days[0].date;
            const weekEnd = days[days.length - 1].date;

            let html = `
                <div class="week-block">
                    <div class="week-header">
                        Week ${weekNum}: ${formatDate(weekStart)} - ${formatDate(weekEnd)}
                    </div>
                    <div class="week-days">
            `;

            // Pad start of week if needed
            const startDay = days[0].date.getDay();
            for (let i = 1; i < startDay; i++) {
                html += '<div class="day-card"></div>';
            }

            days.forEach(day => {
                const dayName = ['Zo', 'Ma', 'Di', 'Wo', 'Do', 'Vr', 'Za'][day.date.getDay()];
                const dayNum = day.date.getDate();
                const monthName = ['jan', 'feb', 'mrt', 'apr', 'mei', 'jun', 'jul', 'aug', 'sep', 'okt', 'nov', 'dec'][day.date.getMonth()];

                let cardClass = 'day-card';
                if (day.type === 'study' || day.type === 'exam-prep') cardClass += ' study-day';
                else if (day.type === 'exam') cardClass += ' exam-day';
                else if (day.type === 'review') cardClass += ' study-day';
                else cardClass += ' rest-day';

                html += `
                    <div class="${cardClass}">
                        <div class="day-header">${dayName} ${dayNum} ${monthName}</div>
                        <div class="day-tasks">
                            ${day.opgaven.map(og => `<div class="task-item">${og}</div>`).join('')}
                            ${day.opgaven.length === 0 ? '<div style="color: #999;">Rust</div>' : ''}
                        </div>
                    </div>
                `;
            });

            html += `
                    </div>
                </div>
            `;

            return html;
        }

        function formatDate(date) {
            const day = date.getDate();
            const month = ['jan', 'feb', 'mrt', 'apr', 'mei', 'jun', 'jul', 'aug', 'sep', 'okt', 'nov', 'dec'][date.getMonth()];
            return `${day} ${month}`;
        }

        function exportToCalendar() {
            alert('üì± iCal export functionaliteit komt binnenkort!\n\nVoorlopig kun je dit schema printen of een screenshot maken.');
        }

        function saveSchedule() {
            const html = document.getElementById('calendarView').innerHTML;
            localStorage.setItem('ncoi_study_schedule', html);
            alert('üíæ Schema opgeslagen in browser!\n\nJe kunt deze pagina later opnieuw openen om je schema te bekijken.');
        }

        // Set default exam date to 30 days from now
        const defaultDate = new Date();
        defaultDate.setDate(defaultDate.getDate() + 30);
        document.getElementById('examDate').valueAsDate = defaultDate;
    </script>
</body>
</html>
