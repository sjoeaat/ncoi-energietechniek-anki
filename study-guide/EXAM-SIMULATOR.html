<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚è±Ô∏è Exam Simulator - NCOI Energietechniek</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #1e3c72;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .setup-screen, .exam-screen, .results-screen {
            display: none;
        }

        .setup-screen.active, .exam-screen.active, .results-screen.active {
            display: block;
        }

        .timer-display {
            background: linear-gradient(135deg, #f44336 0%, #e91e63 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(244,67,54,0.3);
        }

        .timer-display.warning {
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .question-counter {
            text-align: center;
            color: #666;
            font-size: 1.2em;
            margin-bottom: 20px;
        }

        .question-box {
            background: #f5f5f5;
            padding: 30px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
            margin-bottom: 30px;
        }

        .question-text {
            font-size: 1.2em;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answer-options {
            display: grid;
            gap: 15px;
        }

        .answer-btn {
            background: white;
            border: 2px solid #ddd;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            text-align: left;
            font-size: 1.1em;
            transition: all 0.3s;
        }

        .answer-btn:hover {
            border-color: #667eea;
            transform: translateX(5px);
        }

        .answer-btn.selected {
            border-color: #667eea;
            background: #e3f2fd;
        }

        .setup-options {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }

        .setup-option {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }

        .setup-option label {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
            display: block;
        }

        .setup-option select, .setup-option input {
            width: 100%;
            padding: 10px;
            font-size: 1em;
            border: 2px solid #ddd;
            border-radius: 5px;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s;
            display: block;
            margin: 0 auto;
        }

        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .btn-large {
            padding: 20px 40px;
            font-size: 1.3em;
        }

        .control-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .results-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        .grade-box {
            background: linear-gradient(135deg, #4caf50 0%, #45a049 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2em;
            font-weight: bold;
        }

        .grade-box.fail {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
        }

        .review-list {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .review-item {
            padding: 15px;
            border-bottom: 1px solid #ddd;
            margin-bottom: 10px;
        }

        .review-item:last-child {
            border-bottom: none;
        }

        .review-question {
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .review-answer {
            color: #666;
            margin-left: 20px;
        }

        .review-answer.correct {
            color: #4caf50;
        }

        .review-answer.incorrect {
            color: #f44336;
        }

        .info-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚è±Ô∏è Exam Simulator</h1>
        <div class="subtitle">Simuleer examen condities met timing & druk</div>

        <!-- Setup Screen -->
        <div class="setup-screen active" id="setupScreen">
            <div class="info-box">
                <strong>üìã Exam Condities:</strong><br>
                ‚Ä¢ Tijdsdruk zoals echte examen<br>
                ‚Ä¢ Multiple choice vragen<br>
                ‚Ä¢ Geen antwoorden tijdens exam<br>
                ‚Ä¢ Resultaten na afloop<br>
                ‚Ä¢ Aanbevolen: 2 minuten per vraag
            </div>

            <div class="setup-options">
                <div class="setup-option">
                    <label>Aantal Vragen:</label>
                    <select id="questionCount">
                        <option value="10">10 vragen (20 min - kort)</option>
                        <option value="16" selected>16 vragen (32 min - realistisch)</option>
                        <option value="20">20 vragen (40 min - uitgebreid)</option>
                        <option value="30">30 vragen (60 min - volledig)</option>
                    </select>
                </div>

                <div class="setup-option">
                    <label>Tijd per Vraag:</label>
                    <select id="timePerQuestion">
                        <option value="60">1 minuut (sprint mode)</option>
                        <option value="120" selected>2 minuten (examen tempo)</option>
                        <option value="180">3 minuten (rustig tempo)</option>
                    </select>
                </div>

                <div class="setup-option">
                    <label>Moeilijkheidsgraad:</label>
                    <select id="difficulty">
                        <option value="easy">Basis (H 1.9, H 2.6)</option>
                        <option value="medium" selected>Gemiddeld (Mix)</option>
                        <option value="hard">Gevorderd (H 3.11, H 7.8, H 9.7)</option>
                        <option value="all">Alle levels</option>
                    </select>
                </div>
            </div>

            <button class="btn btn-large" onclick="startExam()">üöÄ Start Exam</button>
        </div>

        <!-- Exam Screen -->
        <div class="exam-screen" id="examScreen">
            <div class="timer-display" id="timerDisplay">--:--</div>

            <div class="question-counter" id="questionCounter">Vraag 1 / 16</div>

            <div class="question-box">
                <div class="question-text" id="questionText"></div>
                <div class="answer-options" id="answerOptions"></div>
            </div>

            <div class="control-buttons">
                <button class="btn" onclick="previousQuestion()" id="prevBtn">‚¨ÖÔ∏è Vorige</button>
                <button class="btn" onclick="nextQuestion()" id="nextBtn">Volgende ‚û°Ô∏è</button>
                <button class="btn" onclick="finishExam()" id="finishBtn" style="display: none;">‚úÖ Afronden</button>
            </div>
        </div>

        <!-- Results Screen -->
        <div class="results-screen" id="resultsScreen">
            <div class="grade-box" id="gradeBox"></div>

            <div class="results-stats">
                <div class="stat-card">
                    <div class="stat-number" id="scoreNumber">0</div>
                    <div class="stat-label">Score</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="correctNumber">0</div>
                    <div class="stat-label">Correct</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="percentageNumber">0%</div>
                    <div class="stat-label">Percentage</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="timeUsed">0:00</div>
                    <div class="stat-label">Tijd Gebruikt</div>
                </div>
            </div>

            <div class="review-list" id="reviewList"></div>

            <button class="btn btn-large" onclick="resetExam()">üîÑ Nieuw Examen</button>
        </div>
    </div>

    <script>
        // Comprehensive knowledge questions database (80+ questions)
        const questionDatabase = {
            easy: [
                // Basis - Wet van Ohm & Kirchhoff (H 1.9, H 2.6)
                { q: "Wat is de wet van Ohm?", a: ["U = I √ó R", "P = U √ó I", "R = œÅ √ó l/A", "I = C √ó dU/dt"], correct: 0 },
                { q: "Bij serie schakeling is de totale weerstand:", a: ["R_tot = R1 + R2 + R3", "1/R_tot = 1/R1 + 1/R2", "R_tot = R1 || R2", "R_tot = ‚àö(R1¬≤ + R2¬≤)"], correct: 0 },
                { q: "Kirchhoff's knooppuntwet (KCL) stelt:", a: ["Œ£ I_in = Œ£ I_uit", "Œ£ U_maas = 0", "U = I √ó R", "P = I¬≤ √ó R"], correct: 0 },
                { q: "Kirchhoff's maaswet (KVL) stelt:", a: ["Œ£ U_maas = 0", "Œ£ I_in = Œ£ I_uit", "U = I √ó R", "P = U √ó I"], correct: 0 },
                { q: "Vermogen bereken je met:", a: ["P = U √ó I", "E = P √ó t", "U = I √ó R", "Q = C √ó U"], correct: 0 },
                { q: "Parallel weerstanden bereken je met:", a: ["1/R_tot = 1/R1 + 1/R2", "R_tot = R1 + R2", "R_tot = R1 √ó R2", "R_tot = (R1 + R2)/2"], correct: 0 },
                { q: "Energie bereken je met:", a: ["E = P √ó t", "P = U √ó I", "W = ¬ΩLI¬≤", "Q = CV"], correct: 0 },
                { q: "Bij serie schakeling is de stroom:", a: ["Overal gelijk", "Verschillend per weerstand", "Nul", "Afhankelijk van spanning"], correct: 0 },
                { q: "Bij parallel schakeling is de spanning:", a: ["Overal gelijk", "Verschillend per tak", "Nul", "Som van alle spanningen"], correct: 0 },
                { q: "Rendement bereken je met:", a: ["Œ∑ = P_uit / P_in", "Œ∑ = P_in / P_uit", "Œ∑ = P_uit √ó P_in", "Œ∑ = P_in - P_uit"], correct: 0 },

                // Basis begrippen - Vermogen
                { q: "Wat is de eenheid van vermogen?", a: ["Watt [W]", "Joule [J]", "Volt [V]", "Amp√®re [A]"], correct: 0 },
                { q: "Wat is de eenheid van energie?", a: ["Joule [J] of Wattuur [Wh]", "Watt [W]", "Volt-amp√®re [VA]", "Var [VAR]"], correct: 0 },
                { q: "Bij een weerstand wordt elektrische energie omgezet in:", a: ["Warmte", "Licht", "Magnetisch veld", "Elektrisch veld"], correct: 0 },
                { q: "Een condensator slaat energie op in:", a: ["Elektrisch veld", "Magnetisch veld", "Warmte", "Licht"], correct: 0 },
                { q: "Een spoel slaat energie op in:", a: ["Magnetisch veld", "Elektrisch veld", "Warmte", "Licht"], correct: 0 },

                // DC Netwerken basis
                { q: "Spanningsdeling gebruik je bij:", a: ["Serie weerstanden", "Parallel weerstanden", "Alleen condensatoren", "Alleen spoelen"], correct: 0 },
                { q: "Stroomdeling gebruik je bij:", a: ["Parallel weerstanden", "Serie weerstanden", "Alleen condensatoren", "Alleen spoelen"], correct: 0 },
                { q: "Bij een kortsluiting is de weerstand:", a: ["0 Œ© (nul)", "‚àû (oneindig)", "1 Œ©", "100 Œ©"], correct: 0 },
                { q: "Bij een open klem is de weerstand:", a: ["‚àû (oneindig)", "0 Œ© (nul)", "1 Œ©", "100 Œ©"], correct: 0 },
                { q: "Een ideale spanningsbron heeft:", a: ["R_binnen = 0 Œ©", "R_binnen = ‚àû", "R_binnen = 50 Œ©", "R_binnen variabel"], correct: 0 },

                // AC Basis begrippen
                { q: "De effectieve waarde (RMS) van een sinusgolf is:", a: ["U_top / ‚àö2", "U_top / 2", "U_top √ó ‚àö2", "2 √ó U_top"], correct: 0 },
                { q: "De frequentie van het Nederlandse elektriciteitsnet is:", a: ["50 Hz", "60 Hz", "100 Hz", "25 Hz"], correct: 0 },
                { q: "De netspanning in Nederland is (effectief):", a: ["230 V", "220 V", "325 V", "400 V"], correct: 0 },
                { q: "Hoekfrequentie œâ bereken je met:", a: ["œâ = 2œÄf", "œâ = f/2œÄ", "œâ = œÄf", "œâ = f¬≤"], correct: 0 },
                { q: "Bij een condensator ijlt de stroom:", a: ["90¬∞ voor op de spanning", "90¬∞ achter op de spanning", "180¬∞ op de spanning", "In fase met spanning"], correct: 0 },
                { q: "Bij een spoel ijlt de stroom:", a: ["90¬∞ achter op de spanning", "90¬∞ voor op de spanning", "180¬∞ op de spanning", "In fase met spanning"], correct: 0 },
            ],
            medium: [
                // Th√©venin & Norton (H 3.11)
                { q: "Th√©venin equivalent bestaat uit:", a: ["U_th in serie met R_th", "I_N parallel met R_N", "Alleen U_th", "Alleen R_th"], correct: 0 },
                { q: "Norton equivalent bestaat uit:", a: ["I_N parallel met R_N", "U_th in serie met R_th", "Alleen I_N", "Alleen R_N"], correct: 0 },
                { q: "Norton stroom (I_N) is gelijk aan:", a: ["Kortsluitstroom", "Open-klem stroom", "Helft van kortsluitstroom", "Gemiddelde stroom"], correct: 0 },
                { q: "Th√©venin spanning (U_th) is gelijk aan:", a: ["Open-klem spanning", "Kortsluitspanning", "Helft van open-klem spanning", "Gemiddelde spanning"], correct: 0 },
                { q: "Bij vermogensaanpassing geldt:", a: ["R_last = R_th", "R_last = 2√óR_th", "R_last = 0.5√óR_th", "R_last = 0"], correct: 0 },
                { q: "Het rendement bij vermogensaanpassing is:", a: ["50%", "100%", "75%", "25%"], correct: 0 },
                { q: "R_th bereken je met:", a: ["U_open / I_kort", "U_kort / I_open", "U_open √ó I_kort", "U_kort + I_open"], correct: 0 },
                { q: "Omrekenen van Th√©venin naar Norton: I_N =", a: ["U_th / R_th", "U_th √ó R_th", "R_th / U_th", "U_th + R_th"], correct: 0 },

                // AC & RLC componenten
                { q: "Capacitieve reactantie bereken je met:", a: ["X_C = 1/(2œÄfC)", "X_C = 2œÄfC", "X_C = 2œÄf/C", "X_C = C/(2œÄf)"], correct: 0 },
                { q: "Inductieve reactantie bereken je met:", a: ["X_L = 2œÄfL", "X_L = 1/(2œÄfL)", "X_L = 2œÄf/L", "X_L = L/(2œÄf)"], correct: 0 },
                { q: "Bij hogere frequentie wordt X_C:", a: ["Kleiner", "Groter", "Blijft gelijk", "Eerst groter, dan kleiner"], correct: 0 },
                { q: "Bij hogere frequentie wordt X_L:", a: ["Groter", "Kleiner", "Blijft gelijk", "Eerst kleiner, dan groter"], correct: 0 },
                { q: "Bij DC (f=0) gedraagt een spoel zich als:", a: ["Kortsluiting (R=0)", "Open klem (R=‚àû)", "Weerstand", "Condensator"], correct: 0 },
                { q: "Bij DC (f=0) gedraagt een condensator zich als:", a: ["Open klem (R=‚àû)", "Kortsluiting (R=0)", "Weerstand", "Spoel"], correct: 0 },
                { q: "Bij zeer hoge frequentie gedraagt een spoel zich als:", a: ["Open klem (R=‚àû)", "Kortsluiting (R=0)", "Weerstand", "Condensator"], correct: 0 },
                { q: "Bij zeer hoge frequentie gedraagt een condensator zich als:", a: ["Kortsluiting (R=0)", "Open klem (R=‚àû)", "Weerstand", "Spoel"], correct: 0 },

                // Vermogen AC
                { q: "Werkzaam vermogen (P) heeft als eenheid:", a: ["Watt [W]", "Volt-amp√®re [VA]", "Var [VAR]", "Joule [J]"], correct: 0 },
                { q: "Blindvermogen (Q) heeft als eenheid:", a: ["Var [VAR]", "Watt [W]", "Volt-amp√®re [VA]", "Joule [J]"], correct: 0 },
                { q: "Schijnbaar vermogen (S) heeft als eenheid:", a: ["Volt-amp√®re [VA]", "Watt [W]", "Var [VAR]", "Joule [J]"], correct: 0 },
                { q: "Arbeidsfactor cos œÜ is altijd:", a: ["‚â§ 1", "‚â• 1", "= 1", "> 1"], correct: 0 },
                { q: "Bij een puur resistieve belasting is cos œÜ:", a: ["1", "0", "0.5", "‚àû"], correct: 0 },
                { q: "Bij een puur reactieve belasting is cos œÜ:", a: ["0", "1", "0.5", "‚àû"], correct: 0 },
                { q: "Blindvermogencompensatie doe je met:", a: ["Condensator parallel", "Spoel parallel", "Weerstand serie", "Transformator"], correct: 0 },
                { q: "Na perfecte compensatie is cos œÜ:", a: ["1", "0", "0.5", "Onveranderd"], correct: 0 },

                // Driefase basis
                { q: "Bij een symmetrisch driefasesysteem is het faseverschil:", a: ["120¬∞", "90¬∞", "180¬∞", "60¬∞"], correct: 0 },
                { q: "Bij ster-schakeling geldt: U_lijn =", a: ["‚àö3 √ó U_fase", "U_fase / ‚àö3", "U_fase", "3 √ó U_fase"], correct: 0 },
                { q: "Bij driehoek-schakeling geldt: I_lijn =", a: ["‚àö3 √ó I_fase", "I_fase / ‚àö3", "I_fase", "3 √ó I_fase"], correct: 0 },
                { q: "De lijnspanning in Nederland is:", a: ["400 V", "230 V", "325 V", "690 V"], correct: 0 },
                { q: "De fasespanning in Nederland is:", a: ["230 V", "400 V", "325 V", "133 V"], correct: 0 },
                { q: "Bij driefase met cos œÜ = 1 is P =", a: ["‚àö3 √ó U_lijn √ó I_lijn", "U_lijn √ó I_lijn", "3 √ó U_fase √ó I_fase", "Opties 1 en 3"], correct: 3 },
            ],
            hard: [
                // Resonantie & RLC (H 7.8, H 9.7)
                { q: "Bij RLC serie resonantie is:", a: ["Alle opties correct", "X_L = X_C", "Z minimaal", "cos œÜ = 1"], correct: 0 },
                { q: "Bij RLC parallel resonantie is:", a: ["Alle opties correct", "X_L = X_C", "Z maximaal", "I minimaal"], correct: 0 },
                { q: "Resonantiefrequentie bereken je met:", a: ["f‚ÇÄ = 1/(2œÄ‚àöLC)", "f‚ÇÄ = 2œÄ‚àöLC", "f‚ÇÄ = 1/‚àöLC", "f‚ÇÄ = ‚àöLC"], correct: 0 },
                { q: "Bij serie-resonantie kan de spanning over L of C:", a: ["Groter zijn dan bronspanning", "Kleiner zijn dan bronspanning", "Altijd gelijk aan bronspanning", "Nul zijn"], correct: 0 },
                { q: "Kwaliteitsfactor Q bij resonantie is:", a: ["X_L / R = X_C / R", "R / X_L", "X_L √ó R", "R + X_L"], correct: 0 },
                { q: "Bij hogere Q is de bandbreedte:", a: ["Kleiner (selectiever)", "Groter (minder selectief)", "Gelijk", "Onbepaald"], correct: 0 },
                { q: "Serie RLC gebruik je als:", a: ["Bandfilter (doorlaten f‚ÇÄ)", "Sperfilter (blokkeren f‚ÇÄ)", "Hoogdoorlaatfilter", "Laagdoorlaatfilter"], correct: 0 },
                { q: "Parallel RLC gebruik je als:", a: ["Sperfilter (blokkeren f‚ÇÄ)", "Bandfilter (doorlaten f‚ÇÄ)", "Hoogdoorlaatfilter", "Laagdoorlaatfilter"], correct: 0 },

                // Complexe Rekening (H 9.7, H 10.6)
                { q: "Impedantie Z bereken je met:", a: ["Alle opties correct", "|Z| = ‚àö(R¬≤ + X¬≤)", "Z = R + jX", "Z = U / I"], correct: 0 },
                { q: "Fasehoek œÜ bereken je met:", a: ["Alle opties correct", "œÜ = arctan(X/R)", "œÜ = arccos(R/Z)", "œÜ = arg(Z)"], correct: 0 },
                { q: "Bij inductieve belasting (spoel) is œÜ:", a: ["Positief (stroom ijlt achter)", "Negatief (stroom ijlt voor)", "Nul", "¬±180¬∞"], correct: 0 },
                { q: "Bij capacitieve belasting (condensator) is œÜ:", a: ["Negatief (stroom ijlt voor)", "Positief (stroom ijlt achter)", "Nul", "¬±180¬∞"], correct: 0 },
                { q: "Complex vermogen S bereken je met:", a: ["S = U √ó I* (geconjugeerd)", "S = U √ó I", "S = P + jQ", "Opties 1 en 3"], correct: 3 },
                { q: "In de vermogensdriehoek geldt:", a: ["S¬≤ = P¬≤ + Q¬≤", "P¬≤ = S¬≤ + Q¬≤", "Q¬≤ = P¬≤ + S¬≤", "S = P + Q"], correct: 0 },

                // Fysische betekenis - Conceptueel
                { q: "Waarom gebruikt men hoogspanning voor transmissie?", a: ["Lagere verliezen (I¬≤R) bij lage stroom", "Hogere verliezen", "Goedkopere kabels", "Betere veiligheid"], correct: 0 },
                { q: "Waarom kan spanning over condensator niet springen?", a: ["Zou oneindige stroom vereisen", "Zou oneindige spanning vereisen", "Fysica staat het toe", "Is wel mogelijk"], correct: 0 },
                { q: "Waarom kan stroom door spoel niet springen?", a: ["Zou oneindige spanning vereisen", "Zou oneindige stroom vereisen", "Fysica staat het toe", "Is wel mogelijk"], correct: 0 },
                { q: "Waarom wordt blindvermogen gecompenseerd met condensatoren?", a: ["Condensatoren dissiperen geen vermogen", "Condensatoren zijn goedkoper", "Condensatoren zijn kleiner", "Condensatoren zijn veiliger"], correct: 0 },
                { q: "Bij transformator met kern is koppelfactor k:", a: ["‚âà 1 (bijna perfect)", "‚âà 0.5", "‚âà 0", "Zeer variabel"], correct: 0 },
                { q: "Hystereseverliezen in transformatorkern ontstaan door:", a: ["Magnetisatie-omkering", "Stroomgeleiding", "Warmteontwikkeling", "Mechanische wrijving"], correct: 0 },
                { q: "Bij driefase motor bepaalt de fasevolgorde:", a: ["Draairichting", "Toerental", "Vermogen", "Rendement"], correct: 0 },
                { q: "Effectieve waarde (RMS) geeft aan:", a: ["Equivalent DC-waarde voor vermogen", "Gemiddelde waarde", "Topwaarde", "Minimale waarde"], correct: 0 },
                { q: "Skin-effect betekent:", a: ["Stroom concentreert aan oppervlak", "Stroom verdeelt uniform", "Gelijkstroom fenomeen", "Alleen bij DC"], correct: 0 },
                { q: "Bij een blokgolf is de effectieve waarde:", a: ["Gelijk aan topwaarde", "Topwaarde / ‚àö2", "Topwaarde / ‚àö3", "Topwaarde / 2"], correct: 0 },

                // NIEUWE VRAGEN uit Antwoorden Oefenvragen (43 extra vragen!)

                // Condensatornetwerken & doorslag (Antwoord 1)
                { q: "Als condensator C3 in serie met C2 doorslaat, wat gebeurt er?", a: ["C3 wordt kortsluiting ‚Üí vervangingscapaciteit neemt toe", "C3 wordt open ‚Üí vervangingscapaciteit neemt af", "Geen verandering", "Alle condensatoren slaan door"], correct: 0 },
                { q: "Bij condensatoren in serie + parallel geldt altijd:", a: ["Serie vermindert Cv, parallel verhoogt Cv", "Serie verhoogt Cv, parallel vermindert Cv", "Beide verhogen Cv", "Beide verminderen Cv"], correct: 0 },
                { q: "Waarom neemt Cv toe als een serie-condensator kortsluit?", a: ["Serie-schakeling wordt parallel-schakeling", "Meer platen beschikbaar", "Hogere spanning", "Lagere weerstand"], correct: 0 },

                // Kirchhoff knooppuntanalyse (Antwoord 2)
                { q: "Bij Kirchhoff knooppuntwet (KCL) geldt:", a: ["Œ£ I_in = Œ£ I_uit (stroomsom = 0)", "Œ£ U = 0", "P_in = P_uit", "Alle opties"], correct: 0 },
                { q: "Als Œ£ I_in = 5A en Œ£ I_uit = 15A + I_meter, dan is I_meter:", a: ["-10A (stroomrichting omgekeerd)", "+10A", "0A", "Onbepaald"], correct: 0 },
                { q: "Negatieve stroom bij knooppuntanalyse betekent:", a: ["Gekozen richting is omgekeerd", "Fout in berekening", "Kortsluiting", "Open klem"], correct: 0 },

                // Magnetische flux & toro√Øde (Antwoord 3)
                { q: "In een toro√Øde met luchtspleet is de flux œÜ:", a: ["Overal gelijk (serieschakeling R_mag)", "Groter in luchtspleet", "Kleiner in kernmateriaal", "Alleen in kern"], correct: 0 },
                { q: "Waarom is flux œÜ overal gelijk in toro√Øde?", a: ["Magnetische weerstanden in serie", "Symmetrie veldlijnen", "Wet van behoud", "Opties 1 en 2"], correct: 3 },
                { q: "Bij toro√Øde blijft magnetisch veld:", a: ["Binnen de spoel (weinig strooiveld)", "Ver buiten spoel", "Symmetrisch verdeeld", "Onbepaald"], correct: 0 },

                // Zelfinductie & energie opslag (Antwoord 4)
                { q: "Zelfinductie L bereken je uit e = -L¬∑di/dt als:", a: ["L = -e¬∑dt/di", "L = e/i", "L = di/dt", "L = e¬∑i"], correct: 0 },
                { q: "Bij zelfinductie is de spanning tegengesteld aan:", a: ["Stroomverandering di/dt", "Stroom i", "Weerstand R", "Vermogen P"], correct: 0 },
                { q: "Als di/dt = -0,4 A/300ms en e = 800¬µV, dan L =:", a: ["600 ¬µH", "0,6 mH", "60 mH", "6 H"], correct: 0 },

                // DC vs AC impedantie (Antwoord 5)
                { q: "Bij gelijkspanning (DC) heeft een spoel:", a: ["Alleen ohmse weerstand R", "Hoge impedantie", "Oneindige weerstand", "Reactantie X_L"], correct: 0 },
                { q: "Bij wisselspanning (AC) wordt stroomsterkte bepaald door:", a: ["Impedantie Z = ‚àö(R¬≤+X¬≤)", "Alleen R", "Alleen X", "R + X"], correct: 0 },
                { q: "Fasehoek œÜ bereken je bij RL-kring met:", a: ["tan œÜ = X_L/R", "tan œÜ = R/X_L", "cos œÜ = X_L/Z", "sin œÜ = R/Z"], correct: 0 },

                // Complexe impedantie parallel (Antwoord 6)
                { q: "Bij Z1 = (10-20j)Œ© en Z2 = (10+20j)Œ© parallel geldt:", a: ["Z_v = Z1¬∑Z2/(Z1+Z2) = 25Œ©", "Z_v = Z1 + Z2", "Z_v = 0", "Z_v = ‚àû"], correct: 0 },
                { q: "In complexe rekening is j¬≤ =:", a: ["-1", "+1", "0", "j"], correct: 0 },
                { q: "Bij (10-20j)(10+20j) krijg je:", a: ["100 - 400j¬≤ = 100 + 400 = 500", "100 - 400 = -300", "20 - 40j", "0"], correct: 0 },

                // Th√©venin equivalent (Antwoord 7) - EXAM-KRITISCH!
                { q: "Th√©venin spanning U_th is gelijk aan:", a: ["Open-klem spanning U_AB", "Kortsluitspanning", "Helft van U_bron", "Gemiddelde spanning"], correct: 0 },
                { q: "Th√©venin weerstand R_th bepaal je door:", a: ["Bronnen kortsluiten + vervangingsweerstand", "U_open / I_kort", "R1 + R2", "Opties 1 en 2"], correct: 3 },
                { q: "Bij Th√©venin-vervangingsschema bereken je stroom I met:", a: ["I = U_th / (R_th + R_last)", "I = U_th / R_th", "I = U_th / R_last", "I = kortsluitstroom"], correct: 0 },
                { q: "Als U_th = 0,6V, R_th = 11kŒ©, R5 = 5kŒ©, dan I_R5 =:", a: ["37,5 ¬µA", "54,5 ¬µA", "120 ¬µA", "60 mA"], correct: 0 },

                // Kirchhoff maaswet (Antwoord 8)
                { q: "Kirchhoff maaswet (KVL) stelt:", a: ["Œ£ U_maas = 0", "Œ£ I = 0", "Œ£ P = 0", "Œ£ R = 0"], correct: 0 },
                { q: "In een lus met U1=12V, U2=9V, dan U3 =:", a: ["-21V (polariteit omgekeerd)", "+21V", "3V", "-3V"], correct: 0 },
                { q: "Bij maaswet zijn bronnen in serie:", a: ["Spanningen optellen (let op polariteit!)", "Spanningen aftrekken", "Geen invloed", "Altijd kortsluiting"], correct: 0 },

                // Vermogensdriehoek P/Q/S (Antwoord 9)
                { q: "Als P = 60kW en S = 68kVA, dan Q =:", a: ["32 kvar (uit ‚àö(S¬≤-P¬≤))", "8 kvar", "128 kvar", "Onbepaald"], correct: 0 },
                { q: "Blindvermogen Q bereken je uit P en cos œÜ met:", a: ["Q = P ¬∑ tan œÜ", "Q = P ¬∑ sin œÜ", "Q = P / cos œÜ", "Q = S - P"], correct: 0 },
                { q: "De relatie S¬≤ = P¬≤ + Q¬≤ geldt:", a: ["Altijd (Pythagoras)", "Alleen bij cos œÜ = 1", "Alleen bij sinuso√Øde", "Nooit"], correct: 0 },

                // Transformator wikkelverhouding (Antwoord 10)
                { q: "Bij transformator geldt N1/N2 =:", a: ["U1/U2 = I2/I1", "U1/U2 = I1/I2", "U1¬∑U2", "N1¬∑N2"], correct: 0 },
                { q: "Als U_prim = 6000V, U_sec = 800V, N_prim = 300, dan N_sec =:", a: ["40 windingen", "300 windingen", "2250 windingen", "240 windingen"], correct: 0 },

                // Praktische toepassingen - Zonnepanelen (Antwoord 11)
                { q: "Zonnepaneel 2m¬≤ bij 140 kWh/m¬≤/jaar levert:", a: ["280 kWh/jaar", "140 kWh/jaar", "70 kWh/jaar", "560 kWh/jaar"], correct: 0 },
                { q: "Als 120 panelen (2m¬≤) 33,6 MWh leveren, maar behoefte is 40 MWh, hoeveel extra panelen?", a: ["23 panelen (voor 6,4 MWh)", "12 panelen", "46 panelen", "60 panelen"], correct: 0 },
                { q: "kWh/m¬≤/jaar is een maat voor:", a: ["Energie-opbrengst per oppervlak", "Vermogen", "Rendement", "Efficiency"], correct: 0 },

                // Blindvermogencompensatie (Antwoord 12) - EXAM-KRITISCH!
                { q: "Bij cos œÜ verbetering van 0,75 naar 0,92 neemt S:", a: ["Af (minder schijnbaar vermogen)", "Toe", "Blijft gelijk", "Wordt negatief"], correct: 0 },
                { q: "Als P = 50kW, cos œÜ_oud = 0,75, cos œÜ_nieuw = 0,92, dan Q_compensatie =:", a: ["‚âà 23 kvar", "‚âà 11 kvar", "‚âà 44 kvar", "‚âà 5 kvar"], correct: 0 },
                { q: "Doel blindvermogencompensatie is:", a: ["Lagere I bij zelfde P ‚Üí minder verlies", "Hogere spanning", "Meer vermogen", "Betere veiligheid"], correct: 0 },
                { q: "Na compensatie met condensator wordt cos œÜ:", a: ["Hoger (richting 1)", "Lager", "Negatief", "Onveranderd"], correct: 0 },

                // Driefase spanningsverlies & kabels (Antwoord 13)
                { q: "Bij symmetrische driefase belasting vloeit door nulleider:", a: ["Geen stroom (I_N = 0)", "Fasestroom", "‚àö3 √ó I_fase", "Lijnstroom"], correct: 0 },
                { q: "Spanningsverlies per ader bij kabel: ŒîU =:", a: ["I_fase √ó R_ader", "I_lijn √ó R_totaal", "U / R", "P / U"], correct: 0 },
                { q: "Max. spanningsverlies bij driefase is vaak:", a: ["2% van U_fase", "5% van U_lijn", "10% van U_fase", "1% van U_lijn"], correct: 0 },

                // Ster vs Driehoek (Antwoord 14)
                { q: "Bij ster-geschakelde generator en driehoek-belasting geldt:", a: ["U_belasting = U_lijn = ‚àö3 ¬∑ U_fase_gen", "U_belasting = U_fase", "U_belasting = 3 ¬∑ U_fase", "U_belasting = U_fase / ‚àö3"], correct: 0 },
                { q: "Als generator ster: U_fase = 400V, dan U_lijn =:", a: ["693 V", "400 V", "231 V", "800 V"], correct: 0 },

                // Transformator fysica (Antwoorden 15-16)
                { q: "Voordeel van ijzeren transformatorkern:", a: ["Koppelfactor k ‚âà 1, hoger rendement", "Goedkoper", "Lichter", "Geen verliezen"], correct: 0 },
                { q: "Nadeel van ijzeren transformatorkern:", a: ["Hystereseverliezen + wervelstromen", "Geen nadelen", "Lager rendement", "Instabiliteit"], correct: 0 },
                { q: "Welke bewering is JUIST?", a: ["Bij resonantie: X_L = X_C", "Condensator ijlt 90¬∞ achter", "cos œÜ kan > 1", "DC heeft reactantie"], correct: 0 }
            ]
        };

        let currentExamConfig = {};
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let timerInterval = null;
        let timeRemaining = 0;
        let startTime = 0;

        function startExam() {
            // Get configuration
            const numQuestions = parseInt(document.getElementById('questionCount').value);
            const timePerQ = parseInt(document.getElementById('timePerQuestion').value);
            const difficulty = document.getElementById('difficulty').value;

            currentExamConfig = {
                numQuestions,
                timePerQuestion: timePerQ,
                totalTime: numQuestions * timePerQ,
                difficulty
            };

            // Generate questions
            generateQuestions(numQuestions, difficulty);

            // Initialize
            currentQuestionIndex = 0;
            userAnswers = new Array(numQuestions).fill(null);
            timeRemaining = currentExamConfig.totalTime;
            startTime = Date.now();

            // Show exam screen
            document.getElementById('setupScreen').classList.remove('active');
            document.getElementById('examScreen').classList.add('active');

            // Start timer
            startTimer();

            // Load first question
            loadQuestion();
        }

        function generateQuestions(num, difficulty) {
            let pool = [];

            if (difficulty === 'easy') {
                pool = questionDatabase.easy;
            } else if (difficulty === 'medium') {
                pool = [...questionDatabase.easy, ...questionDatabase.medium];
            } else if (difficulty === 'hard') {
                pool = questionDatabase.hard;
            } else { // all
                pool = [...questionDatabase.easy, ...questionDatabase.medium, ...questionDatabase.hard];
            }

            // Shuffle and select
            const shuffled = pool.sort(() => Math.random() - 0.5);
            currentQuestions = shuffled.slice(0, num);
        }

        function startTimer() {
            updateTimerDisplay();

            timerInterval = setInterval(() => {
                timeRemaining--;

                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    finishExam();
                }

                updateTimerDisplay();

                // Warning animation when < 2 minutes
                if (timeRemaining < 120) {
                    document.getElementById('timerDisplay').classList.add('warning');
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timerDisplay').textContent =
                `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }

        function loadQuestion() {
            const q = currentQuestions[currentQuestionIndex];

            // Update counter
            document.getElementById('questionCounter').textContent =
                `Vraag ${currentQuestionIndex + 1} / ${currentQuestions.length}`;

            // Update question text
            document.getElementById('questionText').textContent = q.q;

            // Update answer options
            const optionsHtml = q.a.map((answer, index) => `
                <button class="answer-btn ${userAnswers[currentQuestionIndex] === index ? 'selected' : ''}"
                        onclick="selectAnswer(${index})">
                    <strong>${String.fromCharCode(65 + index)}:</strong> ${answer}
                </button>
            `).join('');

            document.getElementById('answerOptions').innerHTML = optionsHtml;

            // Update navigation buttons
            document.getElementById('prevBtn').style.display = currentQuestionIndex > 0 ? 'block' : 'none';
            document.getElementById('nextBtn').style.display = currentQuestionIndex < currentQuestions.length - 1 ? 'block' : 'none';
            document.getElementById('finishBtn').style.display = currentQuestionIndex === currentQuestions.length - 1 ? 'block' : 'none';
        }

        function selectAnswer(answerIndex) {
            userAnswers[currentQuestionIndex] = answerIndex;
            loadQuestion(); // Refresh to show selection
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        function finishExam() {
            clearInterval(timerInterval);

            // Calculate results
            let correct = 0;
            currentQuestions.forEach((q, i) => {
                if (userAnswers[i] === q.correct) {
                    correct++;
                }
            });

            const percentage = Math.round((correct / currentQuestions.length) * 100);
            const timeUsed = currentExamConfig.totalTime - timeRemaining;
            const grade = percentage >= 55 ? 'GESLAAGD' : 'NIET GESLAAGD';
            const pass = percentage >= 55;

            // Show results screen
            document.getElementById('examScreen').classList.remove('active');
            document.getElementById('resultsScreen').classList.add('active');

            // Update stats
            document.getElementById('scoreNumber').textContent = `${correct}/${currentQuestions.length}`;
            document.getElementById('correctNumber').textContent = correct;
            document.getElementById('percentageNumber').textContent = percentage + '%';

            const mins = Math.floor(timeUsed / 60);
            const secs = timeUsed % 60;
            document.getElementById('timeUsed').textContent = `${mins}:${secs.toString().padStart(2, '0')}`;

            // Update grade box
            const gradeBox = document.getElementById('gradeBox');
            gradeBox.textContent = `${grade} - ${percentage}%`;
            gradeBox.className = pass ? 'grade-box' : 'grade-box fail';

            // Generate review list
            let reviewHtml = '<h3 style="margin-bottom: 15px;">üìù Review van Antwoorden:</h3>';
            currentQuestions.forEach((q, i) => {
                const userAns = userAnswers[i];
                const isCorrect = userAns === q.correct;

                reviewHtml += `
                    <div class="review-item">
                        <div class="review-question">Vraag ${i + 1}: ${q.q}</div>
                        <div class="review-answer ${isCorrect ? 'correct' : 'incorrect'}">
                            ${isCorrect ? '‚úÖ' : '‚ùå'} Jouw antwoord: ${userAns !== null ? q.a[userAns] : 'Niet beantwoord'}
                        </div>
                        ${!isCorrect ? `<div class="review-answer correct">‚úì Correct antwoord: ${q.a[q.correct]}</div>` : ''}
                    </div>
                `;
            });

            document.getElementById('reviewList').innerHTML = reviewHtml;
        }

        function resetExam() {
            // Reset all state
            clearInterval(timerInterval);
            currentQuestionIndex = 0;
            userAnswers = [];
            timeRemaining = 0;

            // Show setup screen
            document.getElementById('resultsScreen').classList.remove('active');
            document.getElementById('setupScreen').classList.add('active');
        }
    </script>
</body>
</html>
