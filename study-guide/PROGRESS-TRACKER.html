<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìä Study Progress Tracker - NCOI Energietechniek</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        h1 {
            color: #1e3c72;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .stats-dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(102,126,234,0.3);
        }

        .stat-number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        .progress-bar-container {
            background: #f0f0f0;
            border-radius: 20px;
            height: 30px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }

        .progress-bar {
            background: linear-gradient(90deg, #4caf50 0%, #45a049 100%);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 20px;
        }

        .progress-text {
            position: absolute;
            width: 100%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            color: #333;
        }

        .chapter-section {
            margin: 30px 0;
            border-left: 5px solid #667eea;
            padding-left: 20px;
        }

        .chapter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .chapter-title {
            font-size: 1.5em;
            color: #667eea;
            font-weight: bold;
        }

        .chapter-progress {
            font-size: 1em;
            color: #666;
            font-weight: bold;
        }

        .opgave-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .opgave-item {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .opgave-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .opgave-item.completed {
            background: #e8f5e9;
            border-color: #4caf50;
        }

        .checkbox {
            width: 25px;
            height: 25px;
            border: 2px solid #666;
            border-radius: 5px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
        }

        .opgave-item.completed .checkbox {
            background: #4caf50;
            border-color: #4caf50;
            color: white;
        }

        .opgave-text {
            flex: 1;
            font-size: 0.9em;
            color: #333;
        }

        .opgave-item.completed .opgave-text {
            color: #2e7d32;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin: 30px 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #ff9800;
        }

        .btn-secondary:hover {
            background: #f57c00;
        }

        .btn-danger {
            background: #f44336;
        }

        .btn-danger:hover {
            background: #d32f2f;
        }

        .motivational-box {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
            font-size: 1.2em;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä Study Progress Tracker</h1>
        <div class="subtitle">Houd je voortgang bij voor alle NCOI Energietechniek opgaven</div>

        <div class="stats-dashboard">
            <div class="stat-card">
                <div class="stat-number" id="completedCount">0</div>
                <div class="stat-label">Voltooid</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="remainingCount">84</div>
                <div class="stat-label">Nog Te Doen</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="percentageComplete">0%</div>
                <div class="stat-label">Compleet</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="estimatedDays">-</div>
                <div class="stat-label">Geschatte Dagen*</div>
            </div>
        </div>

        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
            <div class="progress-text" id="progressText">0 / 84 opgaven voltooid (0%)</div>
        </div>

        <div id="motivationalMessage" class="motivational-box" style="display: none;"></div>

        <div class="controls">
            <button class="btn" onclick="exportProgress()">üíæ Exporteer Voortgang</button>
            <button class="btn btn-secondary" onclick="importProgress()">üì• Importeer Voortgang</button>
            <button class="btn btn-danger" onclick="resetProgress()">üîÑ Reset Alles</button>
        </div>

        <div id="chaptersContainer"></div>

        <div style="text-align: center; color: #999; margin-top: 40px; padding-top: 20px; border-top: 2px solid #ddd;">
            <p style="font-size: 0.9em;">* Gebaseerd op 2 opgaven per dag (gemiddeld tempo)</p>
            <p style="font-size: 0.9em; margin-top: 10px;">üíæ Voortgang wordt automatisch opgeslagen in je browser (LocalStorage)</p>
        </div>
    </div>

    <script>
        // Data structure: all opgaven organized by chapter
        const opgavenData = {
            "H 1.9": ["Opgave 1-2-5: Ohm's Wet Basis", "Opgave 6-7-8: Kirchhoff Meerkeuze", "Opgave 17: Kirchhoff KCL bij Spanningsbron"],
            "H 2.6": ["Opgave 1a-1d: Vervangingsweerstand", "Opgave 1e-1f: Vervangingsweerstanden", "Opgave 2: Lampen met Kabelverlies", "Opgave 3-4-5: Bewijzen & Shunt", "Opgave 6-9: Stroomberekeningen", "Opgave 10-13: Kirchhoff MC Network 1", "Opgave 14-17: Kirchhoff MC Network 2"],
            "H 3.11": ["Opgave 1a: Th√©venin", "Opgave 1b: Th√©venin", "Opgave 1c: Th√©venin", "Opgave 1d: Th√©venin", "Opgave 2a: Norton", "Opgave 2b: Norton", "Opgave 2c: Norton", "Opgave 2d: Norton", "Opgave 2e: Norton", "Opgave 3: Netwerk Analyse", "Opgave 4: Netwerk Analyse", "Opgave 5: Netwerk Analyse", "Opgave 6-9, 15: Geavanceerde Technieken"],
            "H 4.4": ["Opgave 2-6-8: Energie & Vermogen", "Opgave 3-7-9: Praktische Toepassingen", "Opgave 16-17: Norton & Vermogensaanpassing"],
            "H 5.5": ["Opgave 1: Wisselspanning Basis", "Opgave 7-9: Effectieve Waarden", "Opgave 12-13: Frequentie Berekeningen"],
            "H 6.8": ["Opgave 1: Capaciteit", "Opgave 2-3: Inductie"],
            "H 7.8": ["Opgave 2: RLC Serie", "Opgave 3: RLC Parallel", "Opgave 5: Impedantie", "Opgave 7: Reactantie", "Opgave 8: Resonantie", "Opgave 9: Fasediagram", "Opgave 12-13: Complexe Berekeningen"],
            "H 9.7": ["Opgave 9: Complexe Impedantie", "Opgave 10: Fasoren", "Opgave 11-12: Netwerk Analyse", "Opgave 13: Oscilloscoop Probe"],
            "H 10.6": ["Opgave 5: Complex Rekenen"],
            "H 11.7": ["Opgave 3-5: Vermogen AC"]
        };

        let completedOgaven = new Set();

        // Load progress from localStorage
        function loadProgress() {
            const saved = localStorage.getItem('ncoi_progress');
            if (saved) {
                try {
                    completedOgaven = new Set(JSON.parse(saved));
                } catch (e) {
                    console.error('Error loading progress:', e);
                }
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            localStorage.setItem('ncoi_progress', JSON.stringify([...completedOgaven]));
        }

        // Toggle opgave completion
        function toggleOgave(opgaveId) {
            if (completedOgaven.has(opgaveId)) {
                completedOgaven.delete(opgaveId);
            } else {
                completedOgaven.add(opgaveId);
            }
            saveProgress();
            updateUI();
        }

        // Update all UI elements
        function updateUI() {
            const totalOgaven = Object.values(opgavenData).flat().length;
            const completed = completedOgaven.size;
            const remaining = totalOgaven - completed;
            const percentage = Math.round((completed / totalOgaven) * 100);

            // Update stats
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('remainingCount').textContent = remaining;
            document.getElementById('percentageComplete').textContent = percentage + '%';

            // Estimated days (2 opgaven per day)
            const estimatedDays = remaining > 0 ? Math.ceil(remaining / 2) : 0;
            document.getElementById('estimatedDays').textContent = estimatedDays;

            // Progress bar
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').textContent = `${completed} / ${totalOgaven} opgaven voltooid (${percentage}%)`;

            // Motivational messages
            showMotivationalMessage(percentage);

            // Update chapter progress
            Object.keys(opgavenData).forEach(chapter => {
                const opgaven = opgavenData[chapter];
                const chapterCompleted = opgaven.filter(og => completedOgaven.has(`${chapter}|${og}`)).length;
                const chapterProgress = document.getElementById(`progress-${chapter.replace(/\s/g, '-')}`);
                if (chapterProgress) {
                    chapterProgress.textContent = `${chapterCompleted}/${opgaven.length}`;
                }
            });

            // Update checkboxes
            document.querySelectorAll('.opgave-item').forEach(item => {
                const opgaveId = item.getAttribute('data-opgave-id');
                if (completedOgaven.has(opgaveId)) {
                    item.classList.add('completed');
                } else {
                    item.classList.remove('completed');
                }
            });
        }

        // Show motivational message based on progress
        function showMotivationalMessage(percentage) {
            const msgBox = document.getElementById('motivationalMessage');
            let message = '';

            if (percentage === 100) {
                message = 'üéâ GEFELICITEERD! Je hebt ALLE opgaven voltooid! Je bent klaar voor het examen! üéâ';
            } else if (percentage >= 90) {
                message = 'üî• Bijna klaar! Je bent super goed bezig! Laatste loodjes wegen het zwaarst!';
            } else if (percentage >= 75) {
                message = 'üí™ Geweldig! Driekwart voltooid! Je bent op de goede weg naar succes!';
            } else if (percentage >= 50) {
                message = 'üëç Mooi! Je bent al over de helft! Blijf doorgaan!';
            } else if (percentage >= 25) {
                message = '‚ú® Goed bezig! Een kwart voltooid! Momentum is belangrijk!';
            } else if (percentage > 0) {
                message = 'üöÄ Je bent begonnen! Elke opgave brengt je dichter bij je doel!';
            }

            if (message) {
                msgBox.textContent = message;
                msgBox.style.display = 'block';
            } else {
                msgBox.style.display = 'none';
            }
        }

        // Render all chapters and opgaven
        function renderChapters() {
            const container = document.getElementById('chaptersContainer');
            container.innerHTML = '';

            Object.keys(opgavenData).forEach(chapter => {
                const opgaven = opgavenData[chapter];

                const chapterDiv = document.createElement('div');
                chapterDiv.className = 'chapter-section';

                const chapterHeader = document.createElement('div');
                chapterHeader.className = 'chapter-header';

                const chapterTitle = document.createElement('div');
                chapterTitle.className = 'chapter-title';
                chapterTitle.textContent = chapter;

                const chapterProgress = document.createElement('div');
                chapterProgress.className = 'chapter-progress';
                chapterProgress.id = `progress-${chapter.replace(/\s/g, '-')}`;
                chapterProgress.textContent = '0/' + opgaven.length;

                chapterHeader.appendChild(chapterTitle);
                chapterHeader.appendChild(chapterProgress);

                const opgaveGrid = document.createElement('div');
                opgaveGrid.className = 'opgave-grid';

                opgaven.forEach(opgave => {
                    const opgaveId = `${chapter}|${opgave}`;

                    const opgaveItem = document.createElement('div');
                    opgaveItem.className = 'opgave-item';
                    opgaveItem.setAttribute('data-opgave-id', opgaveId);
                    opgaveItem.onclick = () => toggleOgave(opgaveId);

                    const checkbox = document.createElement('div');
                    checkbox.className = 'checkbox';
                    checkbox.textContent = '‚úì';

                    const opgaveText = document.createElement('div');
                    opgaveText.className = 'opgave-text';
                    opgaveText.textContent = opgave;

                    opgaveItem.appendChild(checkbox);
                    opgaveItem.appendChild(opgaveText);
                    opgaveGrid.appendChild(opgaveItem);
                });

                chapterDiv.appendChild(chapterHeader);
                chapterDiv.appendChild(opgaveGrid);
                container.appendChild(chapterDiv);
            });
        }

        // Export progress
        function exportProgress() {
            const data = JSON.stringify([...completedOgaven]);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'ncoi-progress-backup.json';
            a.click();
            URL.revokeObjectURL(url);
            alert('‚úÖ Voortgang ge√´xporteerd! Bewaar dit bestand veilig.');
        }

        // Import progress
        function importProgress() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'application/json';
            input.onchange = (e) => {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = (event) => {
                    try {
                        const imported = JSON.parse(event.target.result);
                        completedOgaven = new Set(imported);
                        saveProgress();
                        updateUI();
                        alert('‚úÖ Voortgang succesvol ge√Ømporteerd!');
                    } catch (error) {
                        alert('‚ùå Fout bij importeren. Controleer het bestand.');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // Reset all progress
        function resetProgress() {
            if (confirm('‚ö†Ô∏è Weet je zeker dat je alle voortgang wilt wissen? Dit kan niet ongedaan worden!')) {
                completedOgaven.clear();
                saveProgress();
                updateUI();
                alert('üîÑ Voortgang is gereset.');
            }
        }

        // Initialize
        loadProgress();
        renderChapters();
        updateUI();
    </script>
</body>
</html>
